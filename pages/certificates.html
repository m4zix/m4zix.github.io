<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>All Certificates - M4ZiX</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="../assets/icon.png">
    <link rel="stylesheet" href="../styles.css">
</head>
<body class="bg-gray-900 text-white font-mono">
    <header class="flex justify-between items-center p-5 border-b border-green-800 sticky top-0 z-50 bg-gray-900 backdrop-blur-sm">
        <a href="../index.html"><h1 class="text-3xl font-bold font-mono text-green-400">>_ M4ZiX:~</h1></a>
    </header>
    <br><br>
    <h1 class="text-3xl text-green-400 mb-6 px-6">$ ./all_certifications</h1>

    <div class="flex flex-wrap gap-2 ml-6 mb-6">
        <button class="tab-btn px-4 py-2 hover:bg-green-600 rounded-lg bg-gray-700 bg-green-800 text-white" data-category="all">All</button>
        <button class="tab-btn px-4 py-2 hover:bg-green-600 rounded-lg bg-gray-700 text-white" data-category="security">Security</button>
        <button class="tab-btn px-4 py-2 hover:bg-green-600 rounded-lg bg-gray-700 text-white" data-category="soft">Soft Skills</button>
        <button class="tab-btn px-4 py-2 hover:bg-green-600 rounded-lg bg-gray-700 text-white" data-category="other">Other</button>
    </div>
    <!-- Certificates Grid -->
    <div id="all-certificates" class="grid px-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>

    <!-- Popup Overlay -->
    <div id="imagePopup" onclick="closePopup(event)" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 hidden">
        <div class="relative max-w-4xl w-full px-4">
        <img id="popupImage" src="" alt="" class="w-full border-4 border-green-600 rounded-lg shadow-lg">
        <p id="popupTitle" class="text-center text-green-400 mt-2 font-mono"></p>
        </div>
    </div>

    <footer class="p-5 text-center">
        <p>&copy; 2025 M4ZiX. All rights reserved.</p>
    </footer>

    <script>

        let allcerts = [];

        // Fetch posts from JSON
        fetch("../data/certificates.json")
        .then(res => res.json())
        .then(data => {
            allcerts = data; renderCerts(allcerts);
        });

    // Load certificates from JSON
        function renderCerts(certs) {
                const container = document.getElementById('all-certificates');
                container.innerHTML = '';

                certs.forEach(cert => {
                    container.innerHTML += `
                    <div class="bg-gray-800 p-4 rounded-lg border border-green-700 hover:border-green-500 transition-all">
                        <img
                        src=".${cert.image}"
                        alt="${cert.title}"
                        class="rounded mb-3 w-full h-40 object-cover border border-green-700 cursor-pointer hover:opacity-90 transition"
                        onclick="openPopup('.${cert.image}', '${cert.title}')"
                    />
                    <h3 class="text-xl text-green-300 mb-1">${cert.title}</h3>
                    <p class="text-gray-300 text-sm mb-2">${cert.description}</p>
                    <span class="text-xs text-green-400">${cert.date}</span>
                    </div>
                `;
            });
        }

        let tabButtons = document.querySelectorAll('.tab-btn');
        tabButtons.forEach(btn => {
            btn.addEventListener("click", () => {
                tabButtons.forEach(b => b.classList.remove("bg-green-800"));
                tabButtons[0].classList.remove("bg-green-700");
                btn.classList.add("bg-green-800");

                const category = btn.dataset.category;
                if (category === "all") {
                    renderCerts(allcerts);
                } else {
                    const filtered = allcerts.filter(post => post.category.toLowerCase().includes(category.toLowerCase()));
                    renderCerts(filtered);
                }
            });
        });

        // Popup open function
        function openPopup(imageSrc, title) {
            const popup = document.getElementById('imagePopup');
            const popupImg = document.getElementById('popupImage');
            const popupTitle = document.getElementById('popupTitle');

            popupImg.src = imageSrc;
            popupTitle.textContent = title;
            popup.classList.remove('hidden');
        }

        // Popup close function
        function closePopup(event) {
        const popup = document.getElementById('imagePopup');
        if (event.target === popup || event.target.tagName === 'BUTTON') {
            popup.classList.add('hidden');
        }
        }

    </script>
</body>
</html>
